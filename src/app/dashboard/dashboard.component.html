<!-- Loading Spinner while fetching user data from API -->
<div *ngIf="isLoading" class="loading-overlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); z-index: 9999; display: flex; align-items: center; justify-content: center;">
 <nz-spin nzTip="{{ 'Loading user data...' | translate }}" [nzSpinning]="true" nzSize="large"></nz-spin>
</div>

<!-- Main Content - Shows after loading -->
<div *ngIf="!isLoading">
 <app-header></app-header>
 <div class="dashboardContainer mainPageMargin">
   <div class="dashboardNavigation">
     <!-- ==== user1 (Data Entry) ==== -->
     <div *ngIf="user == '1'">
       <p class="navTab"
          [routerLink]="['/dashboard', 'my-task-list']"
          [ngClass]="[router.url.startsWith('/dashboard/my-task') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/my-task')" src="assets/img/homeGrey.svg" alt="Home Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/my-task')" src="assets/img/homeYellow.svg" alt="Home Icon" class="navIcon" />
         {{ "MyTaskList" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'golden-requests']"
          [ngClass]="[router.url.startsWith('/dashboard/golden-requests') || router.url.startsWith('/dashboard/data-lineage') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/golden-requests') && !router.url.startsWith('/dashboard/data-lineage')" src="assets/img/goldenGrey.svg" alt="Home Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/golden-requests') || router.url.startsWith('/dashboard/data-lineage')" src="assets/img/goldenYellow.svg" alt="Home Icon" class="navIcon" />
         {{ "GoldenRequests" | translate }}
       </p>


       <!-- Historical Extracted Data Section for Data Entry User -->
       <div class="navSection">
         <p class="navSectionHeader" (click)="toggleHistoricalDataSection()">
           <i class="fas fa-chevron-right" [ngClass]="{'rotated': historicalDataExpanded}"></i>
           <img src="assets/img/duplicateGrey.svg" alt="Historical Data" class="navIcon" />
           {{ "Historical Extracted Data" | translate }}
         </p>
         <div class="navSubItems" [ngClass]="{'expanded': historicalDataExpanded}">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'duplicate-records']"
              [ngClass]="[router.url.startsWith('/dashboard/duplicate-records') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/duplicate-records')" src="assets/img/duplicateGrey.svg" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/duplicate-records')" src="assets/img/duplicateYellow.svg" class="navIcon" />
             {{ "All Duplicates" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'quarantine']"
              [ngClass]="[router.url.startsWith('/dashboard/quarantine') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/quarantine')" src="assets/img/duplicateGrey.svg" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/quarantine')" src="assets/img/duplicateYellow.svg" class="navIcon" />
             {{ "All Quarantine" | translate }}
           </p>
         </div>
       </div>

       <!-- Dashboards Section for Data Entry User -->
       <div class="navSection">
         <p class="navSectionHeader" (click)="toggleDashboardsSection()">
           <i class="fas fa-chevron-right" [ngClass]="{'rotated': dashboardsExpanded}"></i>
           <img src="assets/img/dashboardGray.svg" alt="Dashboards" class="navIcon" />
           {{ "Dashboards" | translate }}
         </p>
         <div class="navSubItems" [ngClass]="{'expanded': dashboardsExpanded}">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'technical']"
              [ngClass]="[router.url.startsWith('/dashboard/technical') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardGray.svg" alt="Technical Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardYellow.svg" alt="Technical Dashboard" class="navIcon" />
             {{ "Technical Dashboard" | translate }}
           </p>
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'executive']"
              [ngClass]="[router.url.startsWith('/dashboard/executive') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/executive')" src="assets/img/dashboardGray.svg" alt="Executive Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/executive')" src="assets/img/dashboardYellow.svg" alt="Executive Dashboard" class="navIcon" />
             {{ "Executive Dashboard" | translate }}
           </p>
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'business']"
              [ngClass]="[router.url.startsWith('/dashboard/business') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/business')" src="assets/img/dashboardGray.svg" alt="Business Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/business')" src="assets/img/dashboardYellow.svg" alt="Business Dashboard" class="navIcon" />
             {{ "Business Dashboard" | translate }}
           </p>
         </div>
       </div>
     </div>

     <!-- ==== user2 (Master/Reviewer) ==== -->
     <div *ngIf="user == '2'">
       <p class="navTab"
          [routerLink]="['/dashboard', 'admin-task-list']"
          [ngClass]="[router.url.startsWith('/dashboard/admin-task-list') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/admin-task-list')" src="assets/img/homeGrey.svg" alt="quarantined Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/admin-task-list')" src="assets/img/homeYellow.svg" alt="quarantined Icon" class="navIcon" />
         {{ "MyTaskList" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'golden-requests']"
          [ngClass]="[router.url.startsWith('/dashboard/golden-requests') || router.url.startsWith('/dashboard/data-lineage') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/golden-requests') && !router.url.startsWith('/dashboard/data-lineage')" src="assets/img/goldenGrey.svg" alt="Home Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/golden-requests') || router.url.startsWith('/dashboard/data-lineage')" src="assets/img/goldenYellow.svg" alt="Home Icon" class="navIcon" />
         {{ "GoldenRecords" | translate }}
       </p>

       <!-- Dashboards Section for Reviewer User -->
       <div class="navSection">
         <p class="navSectionHeader" (click)="toggleDashboardsSection()">
           <i class="fas fa-chevron-right" [ngClass]="{'rotated': dashboardsExpanded}"></i>
           <img src="assets/img/dashboardGray.svg" alt="Dashboards" class="navIcon" />
           {{ "Dashboards" | translate }}
         </p>
         <div class="navSubItems" [ngClass]="{'expanded': dashboardsExpanded}">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'technical']"
              [ngClass]="[router.url.startsWith('/dashboard/technical') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardGray.svg" alt="Technical Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardYellow.svg" alt="Technical Dashboard" class="navIcon" />
             {{ "Technical Dashboard" | translate }}
           </p>
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'executive']"
              [ngClass]="[router.url.startsWith('/dashboard/executive') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/executive')" src="assets/img/dashboardGray.svg" alt="Executive Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/executive')" src="assets/img/dashboardYellow.svg" alt="Executive Dashboard" class="navIcon" />
             {{ "Executive Dashboard" | translate }}
           </p>
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'business']"
              [ngClass]="[router.url.startsWith('/dashboard/business') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/business')" src="assets/img/dashboardGray.svg" alt="Business Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/business')" src="assets/img/dashboardYellow.svg" alt="Business Dashboard" class="navIcon" />
             {{ "Business Dashboard" | translate }}
           </p>
         </div>
       </div>

     </div>

     <!-- ==== user3 (Compliance) ==== -->
     <div *ngIf="user == '3'">
       <p class="navTab"
          [routerLink]="['/dashboard', 'compliance-task-list']"
          [ngClass]="[router.url.startsWith('/dashboard/compliance-task-list') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/compliance-task-list')" src="assets/img/homeGrey.svg" alt="compliance Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/compliance-task-list')" src="assets/img/homeYellow.svg" alt="compliance Icon" class="navIcon" />
         {{ "MyTaskList" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'golden-requests']"
          [ngClass]="[router.url.startsWith('/dashboard/golden-requests') || router.url.startsWith('/dashboard/data-lineage') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/golden-requests') && !router.url.startsWith('/dashboard/data-lineage')" src="assets/img/goldenGrey.svg" alt="Home Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/golden-requests') || router.url.startsWith('/dashboard/data-lineage')" src="assets/img/goldenYellow.svg" alt="Home Icon" class="navIcon" />
         {{ "GoldenRecords" | translate }}
       </p>
     </div>

     <!-- ==== user4 (System Admin) ==== -->
     <div *ngIf="user == '4' || isAdmin">
       
       <!-- Dashboard Section -->
       <div class="navSection">
         <div class="navSectionHeader" (click)="toggleDashboardsSection()">
           <span class="section-title">{{ "Dashboards" | translate }}</span>
           <i nz-icon [nzType]="dashboardsExpanded ? 'down' : 'right'" class="chevron-icon"></i>
         </div>
         
         <div class="navSubItems" [class.expanded]="dashboardsExpanded">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'executive']"
              [ngClass]="[router.url.startsWith('/dashboard/executive') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/executive')" src="assets/img/dashboardGray.svg" alt="Executive Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/executive')" src="assets/img/dashboardYellow.svg" alt="Executive Dashboard" class="navIcon" />
             {{ "Executive Dashboard" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'technical']"
              [ngClass]="[router.url.startsWith('/dashboard/technical') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardGray.svg" alt="Technical Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardYellow.svg" alt="Technical Dashboard" class="navIcon" />
             {{ "Technical Dashboard" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'business']"
              [ngClass]="[router.url.startsWith('/dashboard/business') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/business')" src="assets/img/dashboardGray.svg" alt="Business Dashboard" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/business')" src="assets/img/dashboardYellow.svg" alt="Business Dashboard" class="navIcon" />
             {{ "Business Dashboard" | translate }}
           </p>
         </div>
       </div>

       <!-- Security Section - CORRECTED -->
       <div class="navSection">
         <div class="navSectionHeader" (click)="toggleSecuritySection()">
           <span class="section-title">{{ "Security" | translate }}</span>
           <i nz-icon [nzType]="securityExpanded ? 'down' : 'right'" class="chevron-icon"></i>
         </div>
         
         <div class="navSubItems" [class.expanded]="securityExpanded">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'user-management']"
              [ngClass]="[router.url.startsWith('/dashboard/user-management') ? 'activeSubTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/user-management')" 
                  src="assets/img/userGrey.svg" 
                  class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/user-management')" 
                  src="assets/img/userYellow.svg" 
                  class="navIcon" />
             {{ "User Management" | translate }}
           </p>
         </div>
       </div>

       <!-- Demo Tools Section -->
       <div class="navSection">
         <div class="navSectionHeader" (click)="toggleDemoToolsSection()">
           <span class="section-title">{{ "Demo Tools" | translate }}</span>
           <i nz-icon [nzType]="demoToolsExpanded ? 'down' : 'right'" class="chevron-icon"></i>
         </div>
         
         <div class="navSubItems" [class.expanded]="demoToolsExpanded">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'pdf-bulk-generator']"
              [ngClass]="[router.url.startsWith('/dashboard/pdf-bulk-generator') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/pdf-bulk-generator')" src="assets/img/dashboardGray.svg" alt="PDF Bulk Generator" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/pdf-bulk-generator')" src="assets/img/dashboardYellow.svg" alt="PDF Bulk Generator" class="navIcon" />
             {{ "PDF Bulk Generator" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'data-management']"
              [ngClass]="[router.url.startsWith('/dashboard/data-management') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/data-management')" src="assets/img/dashboardGray.svg" alt="Data Management" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/data-management')" src="assets/img/dashboardYellow.svg" alt="Data Management" class="navIcon" />
             {{ "Data Management" | translate }}
           </p>
         </div>
       </div>

       <!-- Task Lists Section -->
       <div class="navSection">
         <div class="navSectionHeader" (click)="toggleTaskListsSection()">
           <span class="section-title">{{ "Task Lists" | translate }}</span>
           <i nz-icon [nzType]="taskListsExpanded ? 'down' : 'right'" class="chevron-icon"></i>
         </div>
         
         <div class="navSubItems" [class.expanded]="taskListsExpanded">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'my-task-list']"
              [ngClass]="[router.url.startsWith('/dashboard/my-task-list') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/my-task-list')" src="assets/img/homeGrey.svg" alt="Task List Icon" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/my-task-list')" src="assets/img/homeYellow.svg" alt="Task List Icon" class="navIcon" />
             {{ "MyTaskList" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'admin-task-list']"
              [ngClass]="[router.url.startsWith('/dashboard/admin-task-list') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/admin-task-list')" src="assets/img/homeGrey.svg" alt="Task List Icon" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/admin-task-list')" src="assets/img/homeYellow.svg" alt="Task List Icon" class="navIcon" />
             {{ "Reviewer Task List" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'compliance-task-list']"
              [ngClass]="[router.url.startsWith('/dashboard/compliance-task-list') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/compliance-task-list')" src="assets/img/homeGrey.svg" alt="Compliance Icon" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/compliance-task-list')" src="assets/img/homeYellow.svg" alt="Compliance Icon" class="navIcon" />
             {{ "MyTaskList" | translate }}
           </p>
         </div>
       </div>

       <!-- Golden Records Section -->
       <div class="navSection">
         <div class="navSectionHeader" (click)="toggleGoldenRecordsSection()">
           <span class="section-title">{{ "Golden Records" | translate }}</span>
           <i nz-icon [nzType]="goldenRecordsExpanded ? 'down' : 'right'" class="chevron-icon"></i>
         </div>
         
         <div class="navSubItems" [class.expanded]="goldenRecordsExpanded">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'golden-requests']"
              [ngClass]="[router.url.startsWith('/dashboard/golden-requests') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/golden-requests')" src="assets/img/goldenGrey.svg" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/golden-requests')" src="assets/img/goldenYellow.svg" class="navIcon" />
             {{ "Golden Records" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'sync-golden-records']"
              [ngClass]="[router.url.startsWith('/dashboard/sync-golden-records') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/sync-golden-records')" src="assets/img/goldenGrey.svg" alt="Sync Golden Records" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/sync-golden-records')" src="assets/img/goldenYellow.svg" alt="Sync Golden Records" class="navIcon" />
             {{ "Sync Golden Records" | translate }}
           </p>
         </div>
       </div>

       <!-- Historical Records Section -->
       <div class="navSection">
         <div class="navSectionHeader" (click)="toggleHistoricalDataSection()">
           <span class="section-title">{{ "Historical Records" | translate }}</span>
           <i nz-icon [nzType]="historicalDataExpanded ? 'down' : 'right'" class="chevron-icon"></i>
         </div>
         
         <div class="navSubItems" [class.expanded]="historicalDataExpanded">
           <p class="navSubTab"
              [routerLink]="['/dashboard', 'duplicate-records']"
              [ngClass]="[router.url.startsWith('/dashboard/duplicate-records') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/duplicate-records')" src="assets/img/duplicateGrey.svg" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/duplicate-records')" src="assets/img/duplicateYellow.svg" class="navIcon" />
             {{ "All Duplicates" | translate }}
           </p>

           <p class="navSubTab"
              [routerLink]="['/dashboard', 'quarantine']"
              [ngClass]="[router.url.startsWith('/dashboard/quarantine') ? 'activeTab' : '']">
             <img *ngIf="!router.url.startsWith('/dashboard/quarantine')" src="assets/img/duplicateGrey.svg" class="navIcon" />
             <img *ngIf="router.url.startsWith('/dashboard/quarantine')" src="assets/img/duplicateYellow.svg" class="navIcon" />
             {{ "All Quarantine" | translate }}
           </p>
         </div>
       </div>

     </div>

     <!-- ==== demo-admin ==== -->
     <div *ngIf="user === 'demo-admin' || isDemoAdmin">
       <p class="navTab"
          [routerLink]="['/dashboard', 'demo-admin']"
          [ngClass]="[router.url.startsWith('/dashboard/demo-admin') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/demo-admin')" src="assets/img/dashboardGray.svg" alt="Demo Admin" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/demo-admin')" src="assets/img/dashboardYellow.svg" alt="Demo Admin" class="navIcon" />
         {{ "Demo Admin" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'data-management']"
          [ngClass]="[router.url.startsWith('/dashboard/data-management') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/data-management')" src="assets/img/dashboardGray.svg" alt="Data Management" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/data-management')" src="assets/img/dashboardYellow.svg" alt="Data Management" class="navIcon" />
         {{ "Data Management" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'admin-task-list']"
          [ngClass]="[router.url.startsWith('/dashboard/admin-task-list') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/admin-task-list')" src="assets/img/homeGrey.svg" alt="Task List Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/admin-task-list')" src="assets/img/homeYellow.svg" alt="Task List Icon" class="navIcon" />
         {{ "ReviewerTasks" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'compliance-task-list']"
          [ngClass]="[router.url.startsWith('/dashboard/compliance-task-list') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/compliance-task-list')" src="assets/img/homeGrey.svg" alt="Compliance Icon" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/compliance-task-list')" src="assets/img/homeYellow.svg" alt="Compliance Icon" class="navIcon" />
         {{ "ComplianceTasks" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'golden-requests']"
          [ngClass]="[router.url.startsWith('/dashboard/golden-requests') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/golden-requests')" src="assets/img/goldenGrey.svg" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/golden-requests')" src="assets/img/goldenYellow.svg" class="navIcon" />
         {{ "Golden Records" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'duplicate-requests']"
          [ngClass]="[router.url.startsWith('/dashboard/duplicate-requests') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/duplicate-requests')" src="assets/img/duplicateGrey.svg" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/duplicate-requests')" src="assets/img/duplicateYellow.svg" class="navIcon" />
         {{ "Duplicate Records" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'quarantine']"
          [ngClass]="[router.url.startsWith('/dashboard/quarantine') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/quarantine')" src="assets/img/duplicateGrey.svg" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/quarantine')" src="assets/img/duplicateYellow.svg" class="navIcon" />
         {{ "Quarantine" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'new-request']"
          [ngClass]="[router.url.includes('/new-request') ? 'activeTab' : '']">
         <img *ngIf="!router.url.includes('/new-request')" src="assets/img/addGrey.svg" alt="New Request Icon" class="navIcon" />
         <img *ngIf="router.url.includes('/new-request')" src="assets/img/addYellow.svg" alt="New Request Icon" class="navIcon" />
         {{ "NewRequest" | translate }}
       </p>
     </div>

     <!-- User Info Section -->
     <div class="user-info-section" style="margin-top: auto; padding: 20px; border-top: 1px solid #e8e8e8;">
       <div class="user-role">
         <span style="color: #8c8c8c; font-size: 12px;">{{ "Logged in as" | translate }}:</span>
         <div style="font-weight: 600; margin-top: 4px;">{{ getUserRoleName() }}</div>
       </div>
       <button nz-button nzType="text" nzDanger (click)="logout()" style="margin-top: 10px; width: 100%;">
         <span nz-icon nzType="logout"></span>
         {{ "Logout" | translate }}
       </button>
     </div>

     <!-- ==== user5 (Manager) - Only Business & Technical Dashboards ==== -->
     <div *ngIf="user == '5' || (isManager && !isAdmin)">
       <p class="navTab"
          [routerLink]="['/dashboard', 'business']"
          [ngClass]="[router.url.startsWith('/dashboard/business') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/business')" src="assets/img/dashboardGray.svg" alt="Business Dashboard" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/business')" src="assets/img/dashboardYellow.svg" alt="Business Dashboard" class="navIcon" />
         {{ "Business Dashboard" | translate }}
       </p>

       <p class="navTab"
          [routerLink]="['/dashboard', 'technical']"
          [ngClass]="[router.url.startsWith('/dashboard/technical') ? 'activeTab' : '']">
         <img *ngIf="!router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardGray.svg" alt="Technical Dashboard" class="navIcon" />
         <img *ngIf="router.url.startsWith('/dashboard/technical')" src="assets/img/dashboardYellow.svg" alt="Technical Dashboard" class="navIcon" />
         {{ "Technical Dashboard" | translate }}
       </p>
     </div>
   </div>

   <div class="dashboardContent">
     <!-- Router outlet for child components -->
     <router-outlet></router-outlet>
   </div>
 </div>
 
 <!-- AI Assistant Chatbot - Always visible -->
 <app-ai-assistant></app-ai-assistant>
</div>