<!-- Ø²Ø± Ø¹Ø§Ø¦Ù… Ù„ÙØªØ­ / Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø§Øª -->
<img
  src="assets/img/ChatBotButton.svg"
  alt="HSA Master Data Assistant"
  class="chat-float-button"
  (click)="toggleChat()"
/>

<!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
<div class="chat-box" *ngIf="isChatOpen">
  <!-- Ø§Ù„Ø±Ø£Ø³ -->
  <div class="chat-header">
    <p>
      <img src="assets/img/aiIcon.svg" class="bot-avatar" />
      <span>{{ 'AIAssistant' | translate }}</span>
    </p>
    <button class="close-btn" (click)="toggleChat()">Ã—</button>
  </div>

  <!-- Ø¬Ø³Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
  <div class="chat-body" #chatContainer>
    <!-- Ø±Ø³Ø§Ø¦Ù„ -->
    <ng-container *ngFor="let m of messages">
      <!-- ÙÙ‚Ø§Ø¹Ø© Ø¨ÙˆØª -->
      <div class="chat-message" *ngIf="m.from==='bot'">
        <img src="assets/img/aiIcon.svg" class="bot-avatar" />
        <!-- Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø±Ø³Ø§Ù„Ø© Ø·Ù„Ø¨ Ù…Ø³ØªÙ†Ø¯ Ù†Ø¬Ø¹Ù„ Ø§Ù„ÙÙ‚Ø§Ø¹Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ù‚Ø± -->
        <div
          [ngClass]="'bot-message'"
          (click)="m.text.startsWith('ðŸ“‘') ? fileInput.click() : null"
          style="cursor: pointer;"
        >
          {{ m.text }}
        </div>
      </div>

      <!-- ÙÙ‚Ø§Ø¹Ø© Ù…Ø³ØªØ®Ø¯Ù… -->
      <div class="chat-message user-reverse" *ngIf="m.from==='user'">
        <div class="user-message">{{ m.text }}</div>
      </div>
    </ng-container>
  </div>

  <!-- Ù‚Ø¯Ù… Ø§Ù„Ø´Ø§Øª -->
  <div class="chat-footer">
    <input
      [(ngModel)]="currentInput"
      (keydown.enter)="send()"
      [placeholder]="'WriteSomething' | translate"
    />
    <button (click)="send()">
      <img src="assets/img/send.svg" alt="send" />
    </button>
    <!-- Ø²Ø± ðŸ“‚ Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙŠÙØ¸Ù‡Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù†ØªØ¸Ø§Ø± Ù…Ù„Ù -->
    <button
      *ngIf="awaitingFile"
      class="upload-btn"
      title="Upload"
      (click)="fileInput.click()"
    >ðŸ“‚</button>
  </div>
</div>

<!-- input Ø®ÙÙŠ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„ÙØ§Øª -->
<input #fileInput type="file" style="display:none"
       (change)="onFileSelected($event)" />